import React, { Component } from 'react'
import { Link, withPrefix } from 'gatsby'
import styled, { createGlobalStyle, ThemeProvider } from 'styled-components'
import Logo from '../components/logo'
import Layout from '../components/layout'
import { readableColor } from 'polished'
import { Box, Flex, AnimatedBox } from '../elements'
import { Container, Icon, Menu } from '@material-ui/core'
import { Responsive, Visibility } from 'semantic-ui-react'
import theme from '../gatsby-plugin-theme-ui/index'
import GlobalStyles from './styles/globalStyle'
import MyLogo from './styles/myLogoStyle'
import Nav from './styles/navStyle'
import SideBarInner from './styles/sideBarInnerStyle'


const menuStyle = {
    border: 'none',
    borderRadius: 0,
    boxShadow: 'none',
    marginBottom: '1em',
    justifyContent: 'center',
    backgroundColor: 'transparent',
    transition: 'box-shadow 0.5s ease, padding 0.5s ease',
}

const fixedMenuStyle = {
    backgroundColor: '#fff',
    border: '1px solid #ddd',
    boxShadow: '0px 3px 5px rgba(0, 0, 0, 0.2)',
}

const defaultProps = {
    color: theme.colors.primary,
  }
  

export default class NavBar extends Component {
    state = { 
        menuFixed: false,
    }
    
    stickTopMenu = () => this.setState({ menuFixed: true })
    unStickTopMenu = () => this.setState({ menuFixed: false })
    handleOnUpdate = (e, { width }) => this.setState({ width })

    render() {
        const { menuFixed, width } = this.state
        const menuWidths = width >= Responsive.onlyTablet.maxWidth ? null : 1
        const isHomepage = typeof window !== 'undefined' && window.location.pathname === withPrefix("/");

        return (
     /*        <Visibility
                onBottomPassed={this.stickTopMenu}
                onBottomVisible={this.unStickTopMenu}
                offset={[0, -50]}
                once={false}
            > */
           <ThemeProvider theme={theme}>
           <GlobalStyles />   
           <SideBarInner bg={theme.colors.primary} >
               <Nav>
   
  {/*           <Responsive as={Menu}  
                borderless
                inverted={menuFixed || !isHomepage ? false : true}
                fixed={'top'}
                style={menuFixed ? fixedMenuStyle : menuStyle}
                fireOnMount
                onUpdate={this.handleOnUpdate}
                widths={menuWidths}
            > */}

                <Container  >
                    <Menu.Item header as={Link} to='/'> 
                        <Logo />            
                    </Menu.Item>
                    {/* <Responsive as={Menu.Menu} position='right' {...Responsive.onlyComputer}> */}
                        <menu><Menu.Item as={Link} activeClassName='menu' to='/page'>Portfolio</Menu.Item></menu>
                        <menu><Menu.Item as={Link} activeClassName='menu' to='/contactus'>Contact Us</Menu.Item></menu>
                        <menu><Menu.Item as={Link} activeClassName='menu' to='/servicecatalog'>Service</Menu.Item></menu>
                        <menu><Menu.Item as={Link} activeClassName='menu' to='/about/aboutus'>About Us</Menu.Item></menu>
                        <menu><Menu.Item as={Link} activeClassName='menu' to='/instagram'>Instagram</Menu.Item></menu>
                        <menu><Menu.Item as={Link} activeClassName='menu' to='/'>Home</Menu.Item></menu>
{/*      
                    </Responsive> */}
                </Container>     
            
            {/* </Responsive> */}
        
            </Nav>
            </SideBarInner>
           </ThemeProvider>
        // </Visibility>
        )
    }
}